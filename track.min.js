var NPWUtils=function(){function t(t){var e=document.createElement(t.tag);return e.className=t.class||"",t.type?e.type=t.type:null,t.ref?e.ref=t.ref:null,e.id=t.id||"",e.textContent=t.text||"",e}function e(t){return document.querySelectorAll(t)}function n(t,e){return t.querySelectorAll(e)}function i(t,e){return e?t.innerHTML=e:t.innerHTML}function s(t){return t.cloneNode(!0)}function r(t){return t.innerHTML=""}function o(t,e){return e?t.textContent=e:t.textContent}function a(t,e){return t.removeChild(e)}function m(t,e){return getComputedStyle(t)[e]}function c(t,e){for(var n in e)t.style[n]=e[n]}function g(t,e){return t.getAttribute(e)}function l(t,e,n){return t.setAttribute(e,n)}function u(t,e){return t.classList.remove(e)}function p(t){return t.nextElementSibling}function d(t){return t.parentNode}function b(t){for(var e=[],n=0;n<t.children.length;n++)e.push(t.children[n]);return e}function y(t,e){return t.insertBefore(e,t.children[0])}function h(t,e){return t.appendChild(e)}function k(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}}function f(t,e,n){t.addEventListener(e,n,!1)}function w(t,e,n){t.removeEventListener(e,n,!1)}function v(t,e,n,i,s,r){t.open(e,n,s),t.setRequestHeader("Content-Type","application/json"),t.onreadystatechange=function(){if(4===this.readyState){if(this.status>=200&&this.status<400){var t=JSON.parse(this.responseText);return r(t)}console.log(new Error("Response returned with non-OK status"))}},t.send(i)}return{createElement:t,get:e,find:n,html:i,clone:s,empty:r,text:o,remove:a,getStyle:m,setStyle:c,getAttrs:g,setAttrs:l,removeClass:u,next:p,parent:d,children:b,before:y,append:h,offset:k,on:f,off:w,send:v}}();window.onload=function(t){function e(t){t&&(t[0].match(/[A-Za-zа-яА-Я]/i)&&(s(u),a()),t[0].match(/[A-Za-zа-яА-Я]/i)||n(20,t))}function n(t,e){e.length>t?(s(u),a()):(r(u),m())}function i(e,n,i){var s=t.get("#np-second-state").item(!1);t.children(s);switch(e){case 1:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/processing.png" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Замовлення\n№"+i+"\nзнаходиться в обробці");break;case 2:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/delete.svg" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Експресс накладну\n№"+i+"\nбуло видалено");break;case 3:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/not-found.svg" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Посилку\n№"+i+"\nне знайдено");break;case 4:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/processing.png" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Замовлення\n№"+i+"\nготується до відправлення");break;case 5:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/success.png" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Замовлення\n№"+i+"\nвідправлено");break;case 6:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/ready.png" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Замовлення\n№"+i+"\nготується до видачі");break;case 7:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/house.png" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Замовлення\n№"+i+"\nприбуло на відділення");break;case 8:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/house.png" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Замовлення\n№"+i+"\nприбуло на відділення");break;case 9:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/ok.png" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Відправлення\n№"+i+"\nотримано");break;case 10:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/ok.png" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Відправлення\n№"+i+"\nотримано");break;case 106:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/ok.png" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Відправлення\n№"+i+"\nотримано");break;case 101:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/success.png" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Відправлення\n№"+i+"\nна шляху до одержувача");break;case 102:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/ok.png" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Одержувач відмовився отримувати відправлення\n№"+i);break;case 103:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/delete.png" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Одержувач відмовився отримувати відправлення\n№"+i);break;case 104:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/change.png" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Для відправлення\n№"+i+"\nзмінено адресу доставки");break;case 105:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/delete.png" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Для відправлення\n№"+i+"\nприпинено зберігання посилки");break;case 106:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/ok.png" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Відправлення\n№"+i+"\nотримано");break;case 107:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/pay-for-save.svg" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Для відправлення\n№"+i+"\nнараховується плата за зберігання");break;default:t.html(t.get("#np-status-icon").item(!1),'<img src="https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/not-found.svg" alt="error icon" />'),t.text(t.get("#np-status-message").item(!1),"Вибачте! З технічних причин ми не змогли відстежити вашу посилку")}}function s(e){e.disabled=!0,t.setStyle(e,{"background-color":"#d1d5da",border:"1px solid #c4c4c4"})}function r(e){e.disabled=!1,t.setStyle(e,{"background-color":"",border:""})}function o(t,e){var n=/[^\d][A-Za-z]+/i;return!!t.match(n)}function a(){var e=t.get("#np-warning-message").item(!1),n="Номер посилки невірний";t.setStyle(e,{background:"url()"}),t.text(e,n)}function m(){var e=t.get("#np-warning-message").item(!1);t.setStyle(e,{background:'url("https://apimgmtstorelinmtekiynqw.blob.core.windows.net/content/MediaLibrary/Widget/img/line.png") repeat-x center'}),t.empty(e)}function c(e,n){var i="https://api.novaposhta.ua/v2.0/json/",s={modelName:"TrackingDocument",calledMethod:"getStatusDocuments",methodProperties:{Documents:[{MarketplacePartnerToken:"005056887b8d-a9f2-11e6-735b-be254fe6",DocumentNumber:e,Phone:""}],Language:"UA"}};t.send(b,"POST",i,JSON.stringify(s),!0,n)}var g=(t.get("#np-tracking").item(!1),t.get("#np-user-input").item(!1)),l=t.get("#np-clear-input").item(!1),u=t.get("#np-submit-tracking").item(!1),p=t.get("#np-return-button").item(!1),d=(t.get("#np-warning-message").item(!1),t.get("#np-more").item(!1)),b=function(){return window.XDomainRequest?new XDomainRequest:new XMLHttpRequest}();g.value||s(u),t.on(g,"input",function(){var n=this.value,i=o(n,g);i&&(r(u),m()),i||(s(u),a()),0==n.length&&(s(u),m()),g.value.length>0?t.setStyle(l,{display:"block"}):t.setStyle(l,{display:""}),e(n)}),t.on(u,"click",function(){b.onloadstart=function(){t.setStyle(t.get("#np-text-button-tracking").item(!1),{display:"none"}),t.setStyle(t.get("#np-load-image-tracking").item(!1),{visibility:"visible",transform:"rotate(-360deg)"})},b.onloadend=function(){t.setStyle(t.get("#np-load-image-tracking").item(!1),{visibility:"hidden",transform:""}),t.setStyle(t.get("#np-first-state").item(!1),{display:"none"}),t.setStyle(t.get("#np-second-state").item(!1),{display:"block"}),t.setStyle(t.get("#np-text-button-tracking").item(!1),{display:"block"}),u.disabled=!0},c(g.value,function(e){var n=e.data[0],s=n.Number,r=n.Status,o=+n.StatusCode;i(o,r,s),t.setAttrs(d,"href","https://novaposhta.ua/tracking/?cargo_number="+s+"&yt0=?utm_source=tracking&utm_medium=widget&utm_term=tracking&utm_content=tracking&utm_campaign=NP"),t.setAttrs(d,"target","_blank")})}),t.on(u,"mouseenter",function(){t.setStyle(this,{cursor:"pointer"})}),t.on(p,"click",function(){g.value=null,s(u),t.setStyle(t.get("#np-second-state").item(!1),{display:"none"}),t.setStyle(t.get("#np-first-state").item(!1),{display:"block"}),t.setStyle(l,{display:"none"}),t.setStyle(u,{cursor:"not-allowed"})}),t.on(l,"click",function(){t.setStyle(this,{display:"none"}),g.value=null,m(),s(u)}),t.on(g,"keydown",function(e){var n=e.keyCode;13==n&&0==u.disabled&&(b.onloadstart=function(){t.setStyle(t.get("#np-text-button-tracking").item(!1),{display:"none"}),t.setStyle(t.get("#np-load-image-tracking").item(!1),{visibility:"visible",transform:"rotate(-360deg)"})},b.onloadend=function(){t.setStyle(t.get("#np-load-image-tracking").item(!1),{visibility:"hidden",transform:""}),t.setStyle(t.get("#np-first-state").item(!1),{display:"none"}),t.setStyle(t.get("#np-second-state").item(!1),{display:"block"}),t.setStyle(t.get("#np-text-button-tracking").item(!1),{display:"block"}),u.disabled=!0},c(g.value,function(e){var n=e.data[0],s=n.Number,r=n.Status,o=+n.StatusCode;i(o,r,s),t.setAttrs(d,"href","https://novaposhta.ua/tracking/?cargo_number="+s+"&yt0=?utm_source=tracking&utm_medium=widget&utm_term=tracking&utm_content=tracking&utm_campaign=NP"),t.setAttrs(d,"target","_blank")}))})}(NPWUtils);