var NPWUtils=function(){function t(t){var e=document.createElement(t.tag);return e.className=t.class||"",t.type?e.type=t.type:null,t.ref?e.ref=t.ref:null,e.id=t.id||"",e.textContent=t.text||"",e}function e(t){return document.querySelectorAll(t)}function n(t,e){return t.querySelectorAll(e)}function i(t,e){return e?t.innerHTML=e:t.innerHTML}function o(t){return t.cloneNode(!0)}function r(t){return t.innerHTML=""}function s(t,e){return e?t.textContent=e:t.textContent}function a(t,e){return t.removeChild(e)}function l(t,e){return getComputedStyle(t)[e]}function c(t,e){for(var n in e)t.style[n]=e[n]}function u(t,e){return t.getAttribute(e)}function p(t,e,n){return t.setAttribute(e,n)}function d(t,e){return t.classList.remove(e)}function f(t){return t.nextElementSibling}function y(t){return t.parentNode}function h(t){for(var e=[],n=0;n<t.children.length;n++)e.push(t.children[n]);return e}function m(t,e){return t.insertBefore(e,t.children[0])}function g(t,e){return t.appendChild(e)}function v(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}}function b(t,e,n){t.addEventListener(e,n,!1)}function S(t,e,n){t.removeEventListener(e,n,!1)}function x(t,e,n,i,o,r){t.open(e,n,o),t.setRequestHeader("Content-Type","application/json"),t.onreadystatechange=function(){if(4===this.readyState){if(this.status>=200&&this.status<400){var t=JSON.parse(this.responseText);return r(t)}console.log(new Error("Response returned with non-OK status"))}},t.send(i)}return{createElement:t,get:e,find:n,html:i,clone:o,empty:r,text:s,remove:a,getStyle:l,setStyle:c,getAttrs:u,setAttrs:p,removeClass:d,next:f,parent:y,children:h,before:m,append:g,offset:v,on:b,off:S,send:x}}();window.onload=function(t){function e(){y.classList.contains("np-widget-hz")&&t.setAttrs(g,"placeholder","Вага")}function n(e,n,i,o,r){var s="https://api.novaposhta.ua/v2.0/json/",a={modelName:e,calledMethod:n,methodProperties:i,MarketplacePartnerToken:"005056887b8d-a9f2-11e6-735b-be254fe6"};t.send(x,"POST",s,JSON.stringify(a),o,r)}function i(t){return t.attributes.name.value}function o(t){return t.value}function r(e){e.disabled=!0,t.setStyle(e,{"background-color":"#d1d5da",border:"1px solid #c4c4c4"})}function s(e){e.disabled=!1,t.setStyle(e,{"background-color":"",border:"1px solid transparent"})}function a(){for(var e=t.get(".np-options-enter-point"),n=0;n<e.length;n++){var i=e[n];t.children(i).forEach(function(t){"none"==t.style.display&&(t.style.display="")})}}function l(e,n,i,o){var r=new RegExp(e,"i");for(var s in n)if(n.hasOwnProperty([s])){if(!n[s])continue;var a=t.text(n[s]).match(r);if(a&&0==a.index&&e==a.input){var l=n[s].ref;p[i]=l,o[i]=t.text(n[s])}}}function c(e,n){var i=new RegExp(e,"i");n.forEach(function(e,n){return t.text(e).match(i)||""==t.text(e)?(t.setStyle(e,{display:"block"}),!1):0==t.children(e).length?(t.setStyle(e,{display:"none"}),!1):void 0})}function u(){for(var e=t.find(document.body,".np-option-search-item"),n=[],i=0;i<e.length;i++){var o=e[i];o.value.length>0&&n.push(o)}g.value.length>0&&n.push(g),3==n.length?s(v):r(v)}var p={Cost:"200"},d={},f=t.find(t.get("#np-calc-body").item(!1),".np-calc-field"),y=t.get("#np-calc-body").item(!1),h=f[0],m=f[1],g=t.get(".np-option-search-item-weight").item(!1),v=t.get("#np-calc-submit").item(!1),b=t.get("#np-cost-return-button").item(!1),S=t.get("#np-error-return-button").item(!1),x=function(){return window.XDomainRequest?new XDomainRequest:new XMLHttpRequest}();e(),r(v),n("Address","getCities",null,!0,function(e){var r=e.data;for(var s in f)if("function"!=typeof f[s]&&"number"!=typeof f[s]){var a=i(f[s]);if("dispatch"==a||"catch"==a)for(var y=t.find(f[s],".np-options-enter-point")[0],b=0;b<r.length;b++){var S=r[b],w=S.Description,C=S.Ref,k=t.createElement({tag:"li",ref:C,class:"np-options-list-item",text:w});t.append(y,k)}}t.on(h,"click",function(){var e=t.find(this,".np-option-search-item")[0],n=t.find(this,".np-options-enter-point")[0],i=t.children(n),r=this.attributes.role.value;t.setStyle(n,{display:"block"}),t.on(e,"input",function(){this.value;t.setStyle(n,{display:"block"}),u(),c(o(this),i),l(this.value,i,r,d)});for(var s in i)if(i.hasOwnProperty([s])){if(!i[s])continue;t.on(i[s],"mousedown",function(){d[r]=t.text(this),p[r]=this.ref,e.value=t.text(this),t.setStyle(n,{display:"none"}),u()})}}),t.on(h,"mouseleave",function(){var e=t.find(this,".np-options-enter-point")[0];t.setStyle(e,{display:"none"})}),t.on(m,"click",function(){var e=t.find(this,".np-option-search-item")[0],n=t.find(this,".np-options-enter-point")[0],i=t.children(n),r=this.attributes.role.value;t.setStyle(n,{display:"block"}),t.on(e,"input",function(){this.value;t.setStyle(n,{display:"block"}),u(),c(o(this),i),l(this.value,i,r,d)});for(var s in i)if(i.hasOwnProperty([s])){if(!i[s])continue;t.on(i[s],"mousedown",function(){d[r]=t.text(this),p[r]=this.ref,e.value=t.text(this),t.setStyle(n,{display:"none"}),u()})}}),t.on(m,"mouseleave",function(){var e=t.find(this,".np-options-enter-point")[0];t.setStyle(e,{display:"none"})}),t.on(g,"input",function(e){var n=t.parent(this).attributes.role.value;p[n]=parseInt(this.value),!/^\d+$/.test(e.target.value)&&(e.target.value=e.target.value.substring(0,e.target.value.length-1)),u()}),t.on(v,"click",function(){x.onloadstart=function(){t.setStyle(t.get("#np-text-button").item(!1),{display:"none"}),t.setStyle(t.get("#np-load-image").item(!1),{visibility:"visible",transform:"rotate(-360deg)"})},x.onloadend=function(){t.setStyle(t.get("#np-load-image").item(!1),{visibility:"hidden",transform:""}),t.setStyle(t.get("#np-text-button").item(!1),{display:"block"})},n("InternetDocument","getDocumentPrice",p,!0,function(e){var n=e.success,i=t.get(".np-calc-wrapper").item(!1),o=t.get("#np-error-field").item(!1),r=t.get("#np-cost-field").item(!1),s=t.get("#np-current-city").item(!1),a=t.get("#np-current-weight").item(!1),l="CostWarehouseWarehouse",c=e.data[0];t.setStyle(i,{display:"none"}),t.setStyle(r,{display:"flex"}),n?(t.text(t.get("#np-cost-number").item(!1),c[l]),t.html(s,"<span>"+d.CitySender+'</span class="np-arrow"><span>&rarr;</span><span>'+d.CityRecipient+"</span>"),t.text(a,p.Weight)):(t.setStyle(r,{display:"none"}),t.setStyle(o,{display:"flex"}))})}),t.on(g,"keydown",function(e){13==e.keyCode&&0==v.disabled&&(x.onloadstart=function(){t.setStyle(t.get("#np-text-button").item(!1),{display:"none"}),t.setStyle(t.get("#np-load-image").item(!1),{visibility:"visible",transform:"rotate(-360deg)"})},x.onloadend=function(){t.setStyle(t.get("#np-load-image").item(!1),{visibility:"hidden",transform:""}),t.setStyle(t.get("#np-text-button").item(!1),{display:"block"})},n("InternetDocument","getDocumentPrice",p,!0,function(e){var n=e.success,i=t.get(".np-calc-wrapper").item(!1),o=t.get("#np-error-field").item(!1),r=t.get("#np-cost-field").item(!1),s=t.get("#np-current-city").item(!1),a=t.get("#np-current-weight").item(!1),l="CostWarehouseWarehouse",c=e.data[0];t.setStyle(i,{display:"none"}),t.setStyle(r,{display:"flex"}),n?(t.text(t.get("#np-cost-number").item(!1),c[l]),t.html(s,"<span>"+d.CitySender+'</span class="np-arrow"><span>&rarr;</span><span>'+d.CityRecipient+"</span>"),t.text(a,p.Weight)):(t.setStyle(r,{display:"none"}),t.setStyle(o,{display:"flex"}))}))})}),t.on(b,"click",function(){for(var e in f)if("function"!=typeof f[e]&&"number"!=typeof f[e]){var n=t.children(f[e])[0];n.value=null,r(v)}t.setStyle(t.get(".np-calc-wrapper").item(!1),{display:"flex"}),t.setStyle(t.get("#np-cost-field").item(!1),{display:"none"}),p={Cost:"200"},a()}),S&&t.on(S,"click",function(){for(var e in f)if("function"!=typeof f[e]&&"number"!=typeof f[e]){var n=t.children(f[e])[0];n.value=null,r(v)}t.setStyle(t.get(".np-calc-wrapper").item(!1),{display:"flex"}),t.setStyle(t.get("#np-error-field").item(!1),{display:"none"}),p={Cost:"200"},a()})}(NPWUtils);